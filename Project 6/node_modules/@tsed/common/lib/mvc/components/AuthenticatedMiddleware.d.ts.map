{"version":3,"sources":["mvc/components/AuthenticatedMiddleware.ts"],"names":[],"mappings":"AACA,OAAO,EAAC,WAAW,EAAC,MAAM,eAAe,CAAC;AAC1C,OAAO,EAAC,YAAY,EAAE,GAAG,EAAC,MAAM,eAAe,CAAC;AAGhD;;;;GAIG;AACH,qBACa,uBAAwB,YAAW,WAAW;IAClD,GAAG,CAAQ,OAAO,EAAE,GAAG,EAAkB,QAAQ,EAAE,YAAY;CAOvE","file":"AuthenticatedMiddleware.d.ts","sourcesContent":["import {Unauthorized} from \"ts-httpexceptions\";\nimport {IMiddleware} from \"../interfaces\";\nimport {EndpointInfo, Req} from \"../../filters\";\nimport {Middleware} from \"../decorators/class/middleware\";\n\n/**\n * This middleware manage the authentication based on passport strategy.\n *\n * @middleware\n */\n@Middleware()\nexport class AuthenticatedMiddleware implements IMiddleware {\n  public use(@Req() request: Req, @EndpointInfo() endpoint: EndpointInfo) {\n    const options = endpoint.get(AuthenticatedMiddleware) || {};\n    // @ts-ignore\n    if (request.isAuthenticated && !request.isAuthenticated(options)) {\n      throw new Unauthorized(\"Unauthorized\");\n    }\n  }\n}\n"],"sourceRoot":"../../../src"}
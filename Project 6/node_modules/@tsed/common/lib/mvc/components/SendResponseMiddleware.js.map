{"version":3,"sources":["mvc/components/SendResponseMiddleware.ts"],"names":[],"mappings":";;;AAAA,qCAAmE;AACnE,iDAAkD;AAClD,2CAAgD;AAChD,8CAAyC;AAGzC;;;GAGG;AAEH,IAAa,sBAAsB,GAAnC,MAAa,sBAAsB;IACjC,YAAsB,gBAAkC;QAAlC,qBAAgB,GAAhB,gBAAgB,CAAkB;IAAG,CAAC;IAErD,GAAG,CAAiB,IAAS,EAAS,QAAa;QACxD,IAAI,IAAI,KAAK,SAAS,EAAE;YACtB,OAAO,QAAQ,CAAC,IAAI,EAAE,CAAC;SACxB;QAED,IAAI,eAAQ,CAAC,IAAI,CAAC,EAAE;YAClB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAEpB,OAAO,QAAQ,CAAC;SACjB;QAED,IAAI,gBAAS,CAAC,IAAI,CAAC,IAAI,eAAQ,CAAC,IAAI,CAAC,IAAI,eAAQ,CAAC,IAAI,CAAC,IAAI,IAAI,KAAK,IAAI,EAAE;YACxE,OAAO,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAC5B;QAED,OAAO,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;IAC9D,CAAC;CACF,CAAA;AAjBC;IAAY,mBAAA,sBAAY,EAAE,CAAA,EAAa,mBAAA,aAAG,EAAE,CAAA;;;;iDAgB3C;AAnBU,sBAAsB;IADlC,uBAAU,EAAE;6CAE6B,6BAAgB;GAD7C,sBAAsB,CAoBlC;AApBY,wDAAsB","file":"SendResponseMiddleware.js","sourcesContent":["import {isBoolean, isNumber, isStream, isString} from \"@tsed/core\";\nimport {ConverterService} from \"../../converters\";\nimport {Res, ResponseData} from \"../../filters\";\nimport {Middleware} from \"../decorators\";\nimport {IMiddleware} from \"../interfaces/index\";\n\n/**\n * See example to override SendResponseMiddleware [here](/docs/middlewares/override/send-response.md).\n * @middleware\n */\n@Middleware()\nexport class SendResponseMiddleware implements IMiddleware {\n  constructor(protected converterService: ConverterService) {}\n\n  public use(@ResponseData() data: any, @Res() response: Res) {\n    if (data === undefined) {\n      return response.send();\n    }\n\n    if (isStream(data)) {\n      data.pipe(response);\n\n      return response;\n    }\n\n    if (isBoolean(data) || isNumber(data) || isString(data) || data === null) {\n      return response.send(data);\n    }\n\n    return response.json(this.converterService.serialize(data));\n  }\n}\n"],"sourceRoot":"../../../src"}
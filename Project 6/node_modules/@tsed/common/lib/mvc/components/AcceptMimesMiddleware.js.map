{"version":3,"sources":["mvc/components/AcceptMimesMiddleware.ts"],"names":[],"mappings":";;;;AAAA,yDAAgD;AAChD,2CAAgD;AAChD,8CAAyC;AAGzC;;GAEG;AAEH,IAAa,qBAAqB,6BAAlC,MAAa,qBAAqB;IACzB,GAAG,CAAiB,QAAsB,EAAS,OAAY;QACpE,MAAM,KAAK,GAAG,QAAQ,CAAC,GAAG,CAAC,uBAAqB,CAAC,IAAI,EAAE,CAAC;QAExD,MAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,CAAC,IAAY,EAAE,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;QAEjE,IAAI,CAAC,IAAI,EAAE;YACT,MAAM,IAAI,iCAAa,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SAC3C;IACH,CAAC;CACF,CAAA;AATC;IAAY,mBAAA,sBAAY,EAAE,CAAA,EAA0B,mBAAA,aAAG,EAAE,CAAA;;;;gDAQxD;AATU,qBAAqB;IADjC,uBAAU,EAAE;GACA,qBAAqB,CAUjC;AAVY,sDAAqB","file":"AcceptMimesMiddleware.js","sourcesContent":["import {NotAcceptable} from \"ts-httpexceptions\";\nimport {EndpointInfo, Req} from \"../../filters\";\nimport {Middleware} from \"../decorators\";\nimport {IMiddleware} from \"../interfaces\";\n\n/**\n * @middleware\n */\n@Middleware()\nexport class AcceptMimesMiddleware implements IMiddleware {\n  public use(@EndpointInfo() endpoint: EndpointInfo, @Req() request: Req): void {\n    const mimes = endpoint.get(AcceptMimesMiddleware) || [];\n\n    const find = mimes.find((mime: string) => request.accepts(mime));\n\n    if (!find) {\n      throw new NotAcceptable(mimes.join(\", \"));\n    }\n  }\n}\n"],"sourceRoot":"../../../src"}
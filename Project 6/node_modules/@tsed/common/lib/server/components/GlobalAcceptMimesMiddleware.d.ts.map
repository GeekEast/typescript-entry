{"version":3,"sources":["server/components/GlobalAcceptMimesMiddleware.ts"],"names":[],"mappings":"AACA,OAAO,EAAC,qBAAqB,EAAC,MAAM,cAAc,CAAC;AACnD,OAAO,EAAC,GAAG,EAAC,MAAM,eAAe,CAAC;AAClC,OAAO,EAAC,WAAW,EAAa,MAAM,WAAW,CAAC;AAElD;;GAEG;AACH,qBACa,2BAA4B,YAAW,WAAW;IACjD,OAAO,CAAC,qBAAqB;gBAArB,qBAAqB,EAAE,qBAAqB;IAEhE,GAAG,CAAQ,OAAO,EAAE,GAAG;CAOxB","file":"GlobalAcceptMimesMiddleware.d.ts","sourcesContent":["import {NotAcceptable} from \"ts-httpexceptions\";\nimport {ServerSettingsService} from \"../../config\";\nimport {Req} from \"../../filters\";\nimport {IMiddleware, Middleware} from \"../../mvc\";\n\n/**\n * @middleware\n */\n@Middleware()\nexport class GlobalAcceptMimesMiddleware implements IMiddleware {\n  constructor(private serverSettingsService: ServerSettingsService) {}\n\n  use(@Req() request: Req) {\n    const find = this.serverSettingsService.acceptMimes.find((mime: any) => !!request.accepts(mime));\n\n    if (!find) {\n      throw new NotAcceptable(this.serverSettingsService.acceptMimes.join(\", \"));\n    }\n  }\n}\n"],"sourceRoot":"../../../src"}
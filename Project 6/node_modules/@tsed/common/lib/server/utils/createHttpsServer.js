"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const di_1 = require("@tsed/di");
const Https = require("https");
const config_1 = require("../../config");
const expressApplication_1 = require("../decorators/expressApplication");
const httpsServer_1 = require("../decorators/httpsServer");
function createHttpsServer(injector) {
    /* await */
    injector.forkProvider(httpsServer_1.HttpsServer);
}
exports.createHttpsServer = createHttpsServer;
di_1.registerProvider({
    provide: httpsServer_1.HttpsServer,
    deps: [expressApplication_1.ExpressApplication, config_1.ServerSettingsService],
    scope: di_1.ProviderScope.SINGLETON,
    global: true,
    useFactory(expressApplication, settings) {
        const options = settings.httpsOptions;
        return Https.createServer(options, expressApplication);
    }
});

//# sourceMappingURL=createHttpsServer.js.map
